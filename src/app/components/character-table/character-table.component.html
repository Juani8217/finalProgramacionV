<div class="app-container" *ngIf="currentUser; else loginPrompt">
  <!-- Header con informaci√≥n de usuario -->
  <header class="app-header">
    <div class="user-info">
      <h1 class="app-title">Rick & Morty</h1>
    </div>
    
    <div class="search-container">
      <input #searchInput 
        class="search-input" 
        type="text" 
        placeholder="Search character..." 
        (keyup.enter)="searchCharacterByName(searchInput.value)" />
      <i class="search-icon">üîç</i>
    </div>
  </header>

  <!-- Secci√≥n de Filtros -->
  <div class="filters-section">
    <div class="filter-group">
      <label>Status:</label>
      <select [(ngModel)]="filters.status" (change)="onFilterChange()">
        <option value="">All</option>
        <option *ngFor="let status of filterOptions.statuses" [value]="status">
          {{ status }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <label>Gender:</label>
      <select [(ngModel)]="filters.gender" (change)="onFilterChange()">
        <option value="">All</option>
        <option *ngFor="let gender of filterOptions.genders" [value]="gender">
          {{ gender }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <label>Species:</label>
      <select [(ngModel)]="filters.species" (change)="onFilterChange()">
        <option value="">All</option>
        <option *ngFor="let specie of filterOptions.species" [value]="specie">
          {{ specie }}
        </option>
      </select>
    </div>

    <div class="filter-group">
      <label>Location:</label>
      <select [(ngModel)]="filters.location" (change)="onFilterChange()">
        <option value="">All</option>
        <option *ngFor="let location of filterOptions.locations" [value]="location">
          {{ location }}
        </option>
      </select>
    </div>

    <button class="reset-btn" (click)="resetFilters()">Reset Filters</button>
  </div>

  <!-- Contenido principal -->
  <div class="content-wrapper">
    <div *ngIf="isLoading" class="loading-spinner">
      <div class="spinner"></div>
      <p>Cargando personajes...</p>
    </div>

    <div *ngIf="!isLoading && characters.length === 0" class="no-results">
      <p>No se encontraron personajes con los filtros aplicados</p>
    </div>

    <div class="character-grid" *ngIf="!isLoading && characters.length > 0">
      <div *ngFor="let character of characters" 
           class="character-card" 
           (click)="loadLocationDetails(character)">
        <div class="character-image">
          <img [src]="character?.image" [alt]="character?.name" />
          <span class="status-badge" [class]="character?.status?.toLowerCase()">
            {{character?.status}}
          </span>
        </div>
        <div class="character-info">
          <h3>{{character?.name}}</h3>
          <div class="info-row">
            <span>Species:</span>
            <strong>{{character?.species}}</strong>
          </div>
          <div class="info-row">
            <span>Gender:</span>
            <strong>{{character?.gender}}</strong>
          </div>
          <div class="info-row">
            <span>Location:</span>
            <strong>{{character?.locationDetails?.name || character?.location?.name || 'Unknown'}}</strong>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="app-footer">
    <p>Lucero Juan</p>
    <div class="portal-effect"></div>
  </footer>
</div>

<!-- Template para usuarios no autenticados -->
<ng-template #loginPrompt>
  <div class="login-prompt">
    <div class="login-message">
      <h2>Acceso restringido</h2>
      <p>Debes iniciar sesi√≥n para ver los personajes de Rick & Morty</p>
      <button class="login-btn" routerLink="/login">Ir al Login</button>
    </div>
  </div>
</ng-template>